---
title: 使用L2TP作为Windows VPN接入网络
date: 2025-07-21
updated: 2025-07-24
categories: 璃殊折腾记
tags:
  - 璃殊折腾记
  - 网络技术
top: 2
---
## 前言

最近在校园信息中心工作，考虑到一个情况：寝室需要购买校园网套餐才能使用校园网，而实验楼不需要购买校园网套餐，而且实验楼和寝室的网络在二层上隔离（在三层上互通，这一点是前提），因此只能使用VPN进行连接。因此，我在实验楼搭建了一个VPN服务器，让寝室的设备能够通过VPN连接到校园网。

## L2TP简介

L2TP（Layer 2 Tunneling Protocol）是一种用于创建虚拟专用网络（VPN）的协议。它结合了PPTP（Point-to-Point Tunneling Protocol）和L2F（Layer 2 Forwarding）协议的优点，提供了一种安全、可靠的网络连接方式。

L2TP协议使用隧道技术，将数据封装在另一个协议的数据包中，从而实现不同网络之间的通信。它支持多种加密算法，包括DES、3DES和AES等，确保数据传输的安全性。此外，L2TP还支持身份验证和授权，确保只有授权用户才能访问VPN。

## L2TP配置

### 安装L2TP服务

最底层的系统我选择了免费版的iKuai，但是实际上无论使用那款RouterOS，都可以，只是配置方式不同而已。

选择在ikuai软路由上部署L2TP服务器，首先需要安装L2TP服务
首先进入ikuai的web管理界面，选择“认证计费”->“本地认证服务”，然后选择L2TP服务端

![1753147870803](/images/blog/1753147870803.png)

按照上图进行配置，其中预共享密钥输入一个密码即可，其余选项保持默认即可，然后点击“保存”按钮，等待L2TP服务启动。

::: tip
客户端地址池不能使用原本路由分发的局域网地址，否则会导致客户端无法正常连接。
:::

### 使用L2TP客户端连接

由于Windows是我们使用VPN最频繁的场景，因此这里以Windows11为例，介绍如何使用L2TP连接到VPN服务器。

1.打开“设置”->“网络和Internet”->“VPN”，点击“添加VPN连接”。

![1753340277203](/images/blog/1753340277203.png)

2.在“VPN类型”中选择“使用预共享密钥的L2TP/IPSec”，输入预共享密钥，然后点击“下一步”。
![1753340335444](/images/blog/1753340335444.png)

3.保存后连接即可